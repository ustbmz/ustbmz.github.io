{"version":3,"file":"resetDevice-CDuEVYJo.js","sources":["../../src/page/common/manage/resetDevice.vue"],"sourcesContent":["<script setup>\r\nimport { onMounted } from 'vue'\r\nimport { FoxAuthScope, usePageHelper } from '@/utils/custom'\r\nimport {\r\n  useCardReader,\r\n  useIDCard,\r\n  usePinPad,\r\n  useSIU,\r\n  useReceipt,\r\n  useCamera,\r\n  useFinger,\r\n  useCardDispenser,\r\n  defineFoxData\r\n} from '@/utils/custom'\r\n\r\nconst pageHelper = usePageHelper()\r\nconst idcard = useIDCard()\r\nconst cardReader = useCardReader()\r\nconst siu = useSIU()\r\nconst pinPad = usePinPad()\r\nconst receipt = useReceipt()\r\nconst camera = useCamera()\r\nconst finger = useFinger()\r\nconst cardDispenser = useCardDispenser()\r\n\r\nconst data = defineFoxData({\r\n  entities: [\r\n    { name: 'Card Reader', cnName: 'ËØªÂç°Âô®', entity: cardReader, status: 'FAIL' },\r\n    { name: 'Encrypting PIN Pad', cnName: 'ÂØÜÁ†ÅÈîÆÁõò', entity: pinPad, status: 'FAIL' },\r\n    { name: 'Card Dispend', cnName: 'ÂèëÂç°ÁÆ±', entity: cardDispenser, status: 'FAIL' },\r\n    { name: 'Receipt Printer', cnName: 'Âá≠Êù°Êú∫', entity: receipt, status: 'FAIL' },\r\n    { name: 'IDCard Reader', cnName: 'Ë∫´‰ªΩËØÅËØªÂç°Âô®', entity: idcard, status: 'FAIL' },\r\n    { name: 'SIU', cnName: '‰º†ÊÑüÂô®', entity: siu, status: 'FAIL' },\r\n    { name: 'Camera', cnName: 'ÊëÑÂÉèÂ§¥', entity: camera, status: 'FAIL' },\r\n    { name: 'Finger', cnName: 'ÊåáÁ∫π‰ª™', entity: finger, status: 'FAIL' }\r\n  ],\r\n  activeItem: 'home'\r\n})\r\n\r\nonMounted(async () => {\r\n  getAllStatus()\r\n  updateEntitiesStatus()\r\n  console.log('ü¶ä > file: index.vue:42 > entities:', data.entities)\r\n})\r\n\r\nconst handleClick = item => {\r\n  data.activeItem = item\r\n}\r\n\r\nconst exit = () => {\r\n  pageHelper.to(\r\n    '/public/read-bankcard',\r\n    {\r\n      [FoxAuthScope]: '/public/read-bankcard'\r\n    },\r\n    'default'\r\n  )\r\n}\r\nconst getAllStatus = async () => {\r\n  const promises = data.entities.map(async entity => {\r\n    const state = await entity.entity.getDeviceStatus()\r\n    return { name: entity.name, cnName: entity.cnName, status: formatStatus(state) }\r\n  })\r\n\r\n  try {\r\n    const results = await Promise.all(promises)\r\n    console.log('ü¶ä > file: index.vue:64 > getAllStatus > deviceStatus:', results)\r\n    return results\r\n  } catch (error) {\r\n    console.error('ü¶ä > file: index.vue:67 > getAllStatus > error:', error)\r\n    throw error // ÈáçÊñ∞ÊäõÂá∫ÈîôËØØ‰ª•‰æøË∞ÉÁî®ËÄÖÂ§ÑÁêÜ\r\n  }\r\n}\r\n\r\nconst updateEntitiesStatus = async () => {\r\n  try {\r\n    const deviceStatus = await getAllStatus()\r\n    data.entities.forEach(entity => {\r\n      const statusInfo = deviceStatus.find(status => status.name === entity.name)\r\n      if (statusInfo) {\r\n        entity.status = statusInfo.status\r\n      }\r\n    })\r\n    console.log(' UPDATED ENTITIES:', data.entities)\r\n  } catch (error) {\r\n    console.error(' Êõ¥Êñ∞Áä∂ÊÄÅÊó∂ÂèëÁîüÈîôËØØ:', error)\r\n  }\r\n}\r\n\r\nconst formatStatus = val => {\r\n  console.log('ü¶ä > file: index.vue:73 > formatStatus > val:', val)\r\n  switch (Number(val.code)) {\r\n    case true:\r\n    case 0:\r\n      return 'HEALTHY'\r\n    default:\r\n      return 'ERROR'\r\n  }\r\n}\r\n</script>\r\n<template>\r\n  <div class=\"main\">\r\n    <div class=\"main-top\">\r\n      <div class=\"main-top-title\">\r\n        <div class=\"main-top-title-text\">ËÆæÂ§áÁÆ°ÁêÜ</div>\r\n      </div>\r\n    </div>\r\n    <div class=\"main-bottom\">\r\n      <div class=\"main-bottom-title\">È¢ÑÁïô‰ΩçÁΩÆ</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '_variables.scss';\r\n\r\n* {\r\n  margin: 0;\r\n  padding: 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.container {\r\n  margin: 0;\r\n  padding: 0;\r\n  width: 1280px;\r\n  height: 1024px;\r\n  padding: 20px;\r\n  background-color: $bg-100;\r\n  color: $text-200;\r\n  display: flex;\r\n  flex-flow: row nowrap;\r\n  justify-content: space-around;\r\n  box-sizing: content-box;\r\n  border: 1px solid skyblue;\r\n  box-sizing: border-box;\r\n\r\n  .nav {\r\n    width: 26%;\r\n    height: 100%;\r\n    padding: 40px 20px;\r\n    background-color: $bg-100;\r\n    border-right: 1px solid $bg-300;\r\n    margin: auto;\r\n    display: flex;\r\n    flex-flow: column nowrap;\r\n    justify-content: space-between;\r\n    text-align: center;\r\n    font-size: 16px;\r\n\r\n    .exit {\r\n      display: flex;\r\n      flex-flow: row nowrap;\r\n      justify-content: center;\r\n      gap: 10px;\r\n      border: 1px solid $bg-300;\r\n      width: 60%;\r\n      margin: 0 auto;\r\n      height: 100px;\r\n      align-items: center;\r\n      border-radius: 12px;\r\n      box-shadow: rgb(85, 91, 255) 0px 0px 0px 3px, rgb(31, 193, 27) 0px 0px 0px 6px;\r\n    }\r\n\r\n    .nav-logo {\r\n      position: absolute;\r\n      top: 40px;\r\n      left: 20px;\r\n      width: 240px;\r\n      height: 80px;\r\n      background-image: url('@/assets/img/logo.png');\r\n      color: white;\r\n      background-size: 100% 100%;\r\n      background-repeat: no-repeat;\r\n    }\r\n\r\n    .nav-top {\r\n      margin-top: 140px;\r\n      display: flex;\r\n      flex-flow: column nowrap;\r\n      justify-content: space-around;\r\n      height: 60%;\r\n    }\r\n    .nav-item {\r\n      // background: $primary-100;\r\n      color: $text-100;\r\n      width: 160px;\r\n      height: 80px;\r\n      margin: 0 auto;\r\n      display: flex;\r\n      flex-flow: row nowrap;\r\n      justify-content: center;\r\n      gap: 10px;\r\n      line-height: 80px;\r\n      border-radius: 6px;\r\n      box-shadow: rgba(0, 0, 0, 0.15) 1.95px 1.95px 2.6px;\r\n      background: $primary-100; /* fallback for old browsers */\r\n      background: -webkit-linear-gradient(to right, $primary-100, $primary-200); /* Chrome 10-25, Safari 5.1-6 */\r\n      background: linear-gradient(\r\n        to right,\r\n        $primary-100,\r\n        $primary-200\r\n      ); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */\r\n\r\n      &.active {\r\n        background: #a6aebf;\r\n      }\r\n    }\r\n  }\r\n\r\n  .main {\r\n    width: 100%;\r\n    height: 100%;\r\n    padding: 0 20px 0 40px;\r\n    display: flex;\r\n    flex-flow: column nowrap;\r\n    justify-content: space-between;\r\n\r\n    .main-top-title {\r\n      margin-top: 30px;\r\n      font-size: 16px;\r\n      font-weight: 400;\r\n      line-height: 34px;\r\n      color: #531713;\r\n    }\r\n\r\n    .main-top {\r\n      display: flex;\r\n      height: 100%;\r\n      flex-flow: column nowrap;\r\n      justify-content: flex-start;\r\n      // border: 1px solid #333;\r\n\r\n      .main-top-content {\r\n        display: flex;\r\n        flex-flow: row nowrap;\r\n        justify-content: flex-start;\r\n        flex: 1;\r\n        margin-bottom: 40px;\r\n\r\n        .content-left {\r\n          width: 46%;\r\n          height: 100%;\r\n          display: flex;\r\n          flex-flow: column nowrap;\r\n          justify-content: space-between;\r\n          .main-top-card {\r\n            padding: 16px 0 16px 34px;\r\n            text-align: left;\r\n            display: flex;\r\n            flex-flow: column nowrap;\r\n            justify-content: space-around;\r\n            width: 90%;\r\n            height: 140px;\r\n            border-radius: 16px;\r\n            background: $primary-100;\r\n            background: -webkit-linear-gradient(to right, $primary-100, $primary-200);\r\n            background: linear-gradient(to right, $primary-100, $primary-200);\r\n\r\n            .main-top-card-text {\r\n              display: flex;\r\n              flex-flow: row nowrap;\r\n              justify-content: flex-start;\r\n              align-items: center;\r\n              font-size: 18px;\r\n              color: $text-100;\r\n              line-height: 20px;\r\n            }\r\n            .main-top-card-num {\r\n              font-size: 36px;\r\n              font-weight: 400;\r\n            }\r\n          }\r\n\r\n          .main-top-trans {\r\n            margin-top: 30px;\r\n            border-radius: 16px;\r\n            height: 100%;\r\n            width: 90%;\r\n            background: $bg-200;\r\n            padding: 20px;\r\n            flex: 1;\r\n            box-shadow: rgba(17, 17, 26, 0.1) 0px 1px 0px;\r\n          }\r\n        }\r\n\r\n        .content-right {\r\n          height: 100%;\r\n          width: 60%;\r\n          background: $bg-200;\r\n          border-radius: 16px;\r\n          box-shadow: rgba(17, 17, 26, 0.1) 0px 1px 0px;\r\n          border: 1px solid #333;\r\n\r\n          .content-devices {\r\n            .main-top-card-text {\r\n              margin: 10px;\r\n              line-height: 40px;\r\n              font-weight: 600;\r\n            }\r\n\r\n            .item-status {\r\n              width: 94%;\r\n              margin: 0 auto;\r\n              padding: 20px 20px;\r\n              line-height: 32px;\r\n              height: 10%;\r\n              display: flex;\r\n              flex-flow: row nowrap;\r\n              justify-content: space-between;\r\n              border-bottom: 1px solid #e5e5e5;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .main-bottom {\r\n      height: 200px;\r\n      background: $bg-200;\r\n      border-radius: 16px;\r\n      box-shadow: rgba(17, 17, 26, 0.1) 0px 1px 0px;\r\n    }\r\n  }\r\n}\r\n\r\n.success {\r\n  color: #00c853;\r\n}\r\n.fail {\r\n  color: #f44336;\r\n}\r\n.mr-4 {\r\n  margin-right: 10px;\r\n}\r\n</style>\r\n"],"names":["usePageHelper","idcard","useIDCard","cardReader","useCardReader","siu","useSIU","pinPad","usePinPad","receipt","useReceipt","camera","useCamera","finger","useFinger","cardDispenser","useCardDispenser","data","defineFoxData","onMounted","getAllStatus","updateEntitiesStatus","promises","entity","state","formatStatus","results","error","deviceStatus","statusInfo","status","val"],"mappings":";;2DAemBA,EAAe,EAClC,MAAMC,EAASC,EAAW,EACpBC,EAAaC,EAAe,EAC5BC,EAAMC,EAAQ,EACdC,EAASC,EAAW,EACpBC,EAAUC,EAAY,EACtBC,EAASC,EAAW,EACpBC,EAASC,EAAW,EACpBC,EAAgBC,EAAkB,EAElCC,EAAOC,EAAc,CACzB,SAAU,CACR,CAAE,KAAM,cAAe,OAAQ,MAAO,OAAQf,EAAY,OAAQ,MAAQ,EAC1E,CAAE,KAAM,qBAAsB,OAAQ,OAAQ,OAAQI,EAAQ,OAAQ,MAAQ,EAC9E,CAAE,KAAM,eAAgB,OAAQ,MAAO,OAAQQ,EAAe,OAAQ,MAAQ,EAC9E,CAAE,KAAM,kBAAmB,OAAQ,MAAO,OAAQN,EAAS,OAAQ,MAAQ,EAC3E,CAAE,KAAM,gBAAiB,OAAQ,SAAU,OAAQR,EAAQ,OAAQ,MAAQ,EAC3E,CAAE,KAAM,MAAO,OAAQ,MAAO,OAAQI,EAAK,OAAQ,MAAQ,EAC3D,CAAE,KAAM,SAAU,OAAQ,MAAO,OAAQM,EAAQ,OAAQ,MAAQ,EACjE,CAAE,KAAM,SAAU,OAAQ,MAAO,OAAQE,EAAQ,OAAQ,MAAQ,CAClE,EACD,WAAY,MACd,CAAC,EAEDM,EAAU,SAAY,CACpBC,EAAc,EACdC,EAAsB,EACtB,QAAQ,IAAI,sCAAuCJ,EAAK,QAAQ,CAClE,CAAC,EAeD,MAAMG,EAAe,SAAY,CAC/B,MAAME,EAAWL,EAAK,SAAS,IAAI,MAAMM,GAAU,CACjD,MAAMC,EAAQ,MAAMD,EAAO,OAAO,gBAAiB,EACnD,MAAO,CAAE,KAAMA,EAAO,KAAM,OAAQA,EAAO,OAAQ,OAAQE,EAAaD,CAAK,CAAG,CACpF,CAAG,EAED,GAAI,CACF,MAAME,EAAU,MAAM,QAAQ,IAAIJ,CAAQ,EAC1C,eAAQ,IAAI,yDAA0DI,CAAO,EACtEA,CACR,OAAQC,EAAO,CACd,cAAQ,MAAM,kDAAmDA,CAAK,EAChEA,CACP,CACH,EAEMN,EAAuB,SAAY,CACvC,GAAI,CACF,MAAMO,EAAe,MAAMR,EAAc,EACzCH,EAAK,SAAS,QAAQM,GAAU,CAC9B,MAAMM,EAAaD,EAAa,KAAKE,GAAUA,EAAO,OAASP,EAAO,IAAI,EACtEM,IACFN,EAAO,OAASM,EAAW,OAEnC,CAAK,EACD,QAAQ,IAAI,qBAAsBZ,EAAK,QAAQ,CAChD,OAAQU,EAAO,CACd,QAAQ,MAAM,cAAeA,CAAK,CACnC,CACH,EAEMF,EAAeM,GAAO,CAE1B,OADA,QAAQ,IAAI,gDAAiDA,CAAG,EACxD,OAAOA,EAAI,IAAI,EAAC,CACtB,IAAK,GACL,IAAK,GACH,MAAO,UACT,QACE,MAAO,OACV,CACH"}