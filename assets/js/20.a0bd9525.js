(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{460:function(t,n,s){"use strict";s.r(n);var a=s(31),e=Object(a.a)({},(function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"nginx-基本知识及用法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx-基本知识及用法"}},[t._v("#")]),t._v(" Nginx 基本知识及用法")]),t._v(" "),s("blockquote",[s("p",[t._v("基本环境安装")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ yum -y "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gcc gcc-c++ autoconf pcre pcre-devel "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" automake \n\n$ yum -y "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" httpd-tools "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v("\n")])])]),s("p",[t._v("只针对测试服务器")]),t._v(" "),s("p",[t._v("关闭iptables 规则")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ iptables -L\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 关闭")]),t._v("\n$ iptables -F\n\n$ iptables -t nat -L\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 关闭")]),t._v("\n$ iptables -t nat -F\n")])])]),s("p",[t._v("关闭selinux")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 查看")]),t._v("\n$ getenforce\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 关闭")]),t._v("\n$ setenforce "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n")])])]),s("h2",{attrs:{id:"nginx-优点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx-优点"}},[t._v("#")]),t._v(" Nginx 优点")]),t._v(" "),s("h3",{attrs:{id:"io多路复用-epoll-模型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#io多路复用-epoll-模型"}},[t._v("#")]),t._v(" IO多路复用 epoll 模型")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://gitee.com/cnmz/images/raw/master/mdpic/image-20211006105453966.png",alt:"image-20211006105453966"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://gitee.com/cnmz/images/raw/master/mdpic/image-20211006113459166.png",alt:"image-20211006113459166"}})]),t._v(" "),s("h3",{attrs:{id:"cpu亲和"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cpu亲和"}},[t._v("#")]),t._v(" CPU亲和")]),t._v(" "),s("blockquote",[s("p",[t._v("官方文档  "),s("a",{attrs:{href:"http://nginx.org/en/docs/ngx_core_module.html#worker_cpu_affinity",target:"_blank",rel:"noopener noreferrer"}},[t._v("Core functionality (nginx.org)"),s("OutboundLink")],1)])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://gitee.com/cnmz/images/raw/master/mdpic/image-20211006113833608.png",alt:"image-20211006113833608"}})]),t._v(" "),s("h2",{attrs:{id:"nginx-快速安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx-快速安装"}},[t._v("#")]),t._v(" Nginx 快速安装")]),t._v(" "),s("blockquote",[s("p",[t._v("官方安装文档 "),s("a",{attrs:{href:"http://nginx.org/en/linux_packages.html#RHEL-CentOS",target:"_blank",rel:"noopener noreferrer"}},[t._v("nginx: Linux packages"),s("OutboundLink")],1)])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ yum "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" yum-utils\n")])])]),s("p",[t._v("To set up the yum repository, create the file named "),s("code",[t._v("/etc/yum.repos.d/nginx.repo")]),t._v(" with the following contents:")]),t._v(" "),s("blockquote",[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[nginx-stable]\nname=nginx stable repo\nbaseurl=http://nginx.org/packages/centos/$releasever/$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\n\n[nginx-mainline]\nname=nginx mainline repo\nbaseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/\ngpgcheck=1\nenabled=0\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\n")])])])]),t._v(" "),s("p",[t._v("By default, the repository for stable nginx packages is used. If you would like to use mainline nginx packages, run the following command:")]),t._v(" "),s("blockquote",[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo yum-config-manager --enable nginx-mainline\n")])])])]),t._v(" "),s("p",[t._v("To install nginx, run the following command:")]),t._v(" "),s("blockquote",[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("sudo yum install nginx\n")])])])]),t._v(" "),s("p",[t._v("When prompted to accept the GPG key, verify that the fingerprint matches "),s("code",[t._v("573B FD6B 3D8F BC64 1079 A6AB ABF5 BD82 7BD9 BF62")]),t._v(", and if so, accept it.")]),t._v(" "),s("p",[t._v("配置 /etc/yum.repo.d/nginx.repo")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("nginx-stable"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nginx stable repo\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("baseurl")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("http://nginx.org/packages/centos/"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$releasever")]),t._v("/"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$basearch")]),t._v("/\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("gpgcheck")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("enabled")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("gpgkey")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://nginx.org/keys/nginx_signing.key\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("module_hotfixes")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("nginx-mainline"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nginx mainline repo\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("baseurl")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("http://nginx.org/packages/mainline/centos/"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$releasever")]),t._v("/"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$basearch")]),t._v("/\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("gpgcheck")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("enabled")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("gpgkey")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://nginx.org/keys/nginx_signing.key\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("module_hotfixes")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true \n")])])]),s("p",[t._v("查看 nginx 版本")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ yum list "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" nginx\n")])])]),s("p",[t._v("安装稳定版")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ yum "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y nginx\n")])])]),s("p",[t._v("查看 nginx 安装目录及配置文件")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rpm")]),t._v(" -ql nginx\n")])])]),s("p",[s("img",{attrs:{src:"https://gitee.com/cnmz/images/raw/master/mdpic/image-20211006153451428.png",alt:"image-20211006153451428"}})]),t._v(" "),s("h2",{attrs:{id:"安装目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装目录"}},[t._v("#")]),t._v(" 安装目录")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("路径")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("作用")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("/etc/logrotate.d/nginx")]),t._v(" "),s("td",[t._v("配置文件")]),t._v(" "),s("td",[t._v("nginx日志轮转，用于logrotate服务的日志切割")])]),t._v(" "),s("tr",[s("td",[t._v("/etc/nginx")]),t._v(" "),s("td",[t._v("目录、配置文件")]),t._v(" "),s("td",[t._v("Nginx主配置文件")])]),t._v(" "),s("tr",[s("td",[t._v("/etc/nginx/nginx.conf")]),t._v(" "),s("td",[t._v("目录、配置文件")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("/etc/nginx/conf.a")]),t._v(" "),s("td",[t._v("目录、配置文件")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("/etc/nginx/conf.d/default.conf")]),t._v(" "),s("td",[t._v("目录、配置文件")]),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("/etc/nginx/fastcgi_params")]),t._v(" "),s("td",[t._v("配置文件")]),t._v(" "),s("td",[t._v("cgi配置相关，fastcgi配置")])]),t._v(" "),s("tr",[s("td",[t._v("/etc/nginx/uwsgi_params")]),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("/etc/nginx/scgi_params")]),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("/etc/nginx/koi-utf")]),t._v(" "),s("td",[t._v("配置文件")]),t._v(" "),s("td",[t._v("编码转换映射转化文件")])]),t._v(" "),s("tr",[s("td",[t._v("/etc/nginx/koi-win")]),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("/etc/nginx/win-utf")]),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("/usr/lib/systemd/system.nginx-debug.service")]),t._v(" "),s("td",[t._v("配置文件")]),t._v(" "),s("td",[t._v("用于配置系统守护进程管理器管理方式")])]),t._v(" "),s("tr",[s("td",[t._v("/usr/lib/systemd/nginx-.service")]),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("/etc/sysconfig/nginx")]),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("/etc/sysconfig/nginx-debug")]),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("/usr/lib64/nginx/modules")]),t._v(" "),s("td",[t._v("目录")]),t._v(" "),s("td",[t._v("Nginx模块目录")])]),t._v(" "),s("tr",[s("td",[t._v("/etc/nginx/modules")]),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("/usr/sbin/nginx")]),t._v(" "),s("td",[t._v("命令")]),t._v(" "),s("td",[t._v("nginx服务的启动管理终端命令")])]),t._v(" "),s("tr",[s("td",[t._v("/usr/sbin/nginx-debug")]),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("/var/cache/nginx")]),t._v(" "),s("td",[t._v("目录")]),t._v(" "),s("td",[t._v("Nginx的缓存目录")])]),t._v(" "),s("tr",[s("td",[t._v("/var/log/nginx")]),t._v(" "),s("td",[t._v("目录")]),t._v(" "),s("td",[t._v("Nginx的日志目录")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://gitee.com/cnmz/images/raw/master/mdpic/image-20211007103749709.png",alt:"image-20211007103749709"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://gitee.com/cnmz/images/raw/master/mdpic/image-20211007103812716.png",alt:"image-20211007103812716"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://gitee.com/cnmz/images/raw/master/mdpic/image-20211007103832573.png",alt:"image-20211007103832573"}})]),t._v(" "),s("h2",{attrs:{id:"nginx-conf-配置详解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx-conf-配置详解"}},[t._v("#")]),t._v(" Nginx.conf 配置详解")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 设置nginx 服务使用的系统用户")]),t._v("\nuser  nginx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 工作进程数 IO复用，启用多个work实现并发处理。一般与cpu个数保持一致")]),t._v("\nworker_processes  auto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## nginx错误日志")]),t._v("\nerror_log  /var/log/nginx/error.log notice"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## nginx服务启动时pid  把每次启动的PID记录下来，方便以后查找")]),t._v("\npid        /var/run/nginx.pid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 事件模块")]),t._v("\nevents "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 每个进程容许的最大连接数  最大连接数6535")]),t._v("\n    worker_connections  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## use 定义使用的内核模型")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\nhttp "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    include       /etc/nginx/mime.types"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    default_type  application/octet-stream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    log_format  main  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'$remote_addr - $remote_user [$time_local] \"$request\" '")]),t._v("\n                      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'$status $body_bytes_sent \"$http_referer\" '")]),t._v("\n                      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'"$http_user_agent" "$http_x_forwarded_for"\'')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    access_log  /var/log/nginx/access.log  main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    sendfile        on"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#tcp_nopush     on;")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 超时时间")]),t._v("\n    keepalive_timeout  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("65")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#gzip  on;")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 默认加载conf.d下所有的conf配置文件")]),t._v("\n    include /etc/nginx/conf.d/*.conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"conf-d-default-conf-详解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#conf-d-default-conf-详解"}},[t._v("#")]),t._v(" conf.d / default.conf 详解")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("server "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 监听端口")]),t._v("\n    listen       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 域名地址")]),t._v("\n    server_name  localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#access_log  /var/log/nginx/host.access.log  main;")]),t._v("\n\n    location / "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 首页路径")]),t._v("\n        root   /usr/share/nginx/html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 首页页面")]),t._v("\n        index  index.html index.htm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#error_page  404              /404.html;")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# redirect server error pages to the static page /50x.html")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n    error_page   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("502")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("503")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("504")]),t._v("  /50x.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    location "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" /50x.html "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        root   /usr/share/nginx/html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# proxy the PHP scripts to Apache listening on 127.0.0.1:80")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#location ~ \\.php$ {")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    proxy_pass   http://127.0.0.1;")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#location ~ \\.php$ {")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    root           html;")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    fastcgi_pass   127.0.0.1:9000;")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    fastcgi_index  index.php;")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    include        fastcgi_params;")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# deny access to .htaccess files, if Apache's document root")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# concurs with nginx's one")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#location ~ /\\.ht {")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    deny  all;")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"nginx虚拟主机及实现方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx虚拟主机及实现方式"}},[t._v("#")]),t._v(" Nginx虚拟主机及实现方式")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 检查虚拟主机 Nginx配置文件是否正确")]),t._v("\n$ nginx -tc /etc/nginx/nginx.conf \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 停止nginx服务")]),t._v("\n$ systemctl stop nginx \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## OR")]),t._v("\n$ nginx -s stop -c /etc/nginx/nginx.conf \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 启动nginx服务")]),t._v("\n$ systemctl start nginx \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# OR")]),t._v("\n$ nginx -c /etc/nginx/nginx.conf \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 查看本机监听端口")]),t._v("\n$ ss -luntp\n\n")])])])])}),[],!1,null,null,null);n.default=e.exports}}]);