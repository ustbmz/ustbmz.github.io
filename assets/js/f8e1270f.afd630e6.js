"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6592],{7800:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>c,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>m});const r=JSON.parse('{"id":"React15/5-6.\u5b9e\u73b0vue\u8def\u7531\u914d\u7f6e\u6a21\u5f0f","title":"5-6.\u5b9e\u73b0vue\u8def\u7531\u914d\u7f6e\u6a21\u5f0f","description":"\u6269\u5c55React \uff08react-router-dom\uff09\u8def\u7531","source":"@site/docs/React15/5-6.\u5b9e\u73b0vue\u8def\u7531\u914d\u7f6e\u6a21\u5f0f.md","sourceDirName":"React15","slug":"/React15/5-6.\u5b9e\u73b0vue\u8def\u7531\u914d\u7f6e\u6a21\u5f0f","permalink":"/docs/React15/5-6.\u5b9e\u73b0vue\u8def\u7531\u914d\u7f6e\u6a21\u5f0f","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/React15/5-6.\u5b9e\u73b0vue\u8def\u7531\u914d\u7f6e\u6a21\u5f0f.md","tags":[],"version":"current","frontMatter":{},"sidebar":"reactOldSiderBar","previous":{"title":"\u81ea\u5b9a\u4e49\u8def\u7531\u4fdd\u62a4","permalink":"/docs/React15/5-5.\u53d7\u4fdd\u62a4\u7684\u9875\u9762"},"next":{"title":"\u5bfc\u822a\u5b88\u536b","permalink":"/docs/React15/5-7.\u5bfc\u822a\u5b88\u536b"}}');var o=t(4848),a=t(8453);const s={},c=void 0,i={},m=[{value:"\u6269\u5c55React \uff08react-router-dom\uff09\u8def\u7531",id:"\u6269\u5c55react-react-router-dom\u8def\u7531",level:3}];function u(e){const n={blockquote:"blockquote",code:"code",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h3,{id:"\u6269\u5c55react-react-router-dom\u8def\u7531",children:"\u6269\u5c55React \uff08react-router-dom\uff09\u8def\u7531"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"\u901a\u8fc7\u6269\u5c55( Route , Link ) \u5b9e\u73b0vue\u57fa\u7840\u8def\u7531\u914d\u7f6e\u6a21\u5f0f"})}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"routeConfig.js"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'import Home from "./Home"\nimport News from "./News"\nimport NewsHome from "./NewsHome"\nimport NewsDetail from "./NewsDetail"\nimport NewsSearch from "./NewsSearch"\n\nexport default [\n    {\n        path: "/news", component: News, name: "news",\n        children: [\n            { path: "/", name: "newsHome", exact: true, component: NewsHome },\n            { path: "/dl", name: "newsDetail", exact: true, component: NewsDetail },\n            { path: "/ser", name: "newsSearch", exact: true, component: NewsSearch }\n        ]\n    },\n    { path: "/", name: "home", component: Home },\n]\n'})}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"router.js"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'import React from \'react\'\nimport { Route, Switch } from "react-router-dom"\nimport routeConfig from "./routeConfig"\n\n/**\n * \u6839\u636e\u4e00\u4e2a\u8def\u7531\u914d\u7f6e\u6570\u7ec4\uff0c\u904d\u5386\u8be5\u6570\u7ec4\uff0c\u5f97\u5230\u4e00\u7ec4Route\u7ec4\u4ef6\n * @param {*} routes \n */\nfunction getRoutes(routes, basePath) {\n    if (!Array.isArray(routes)) {\n        return null;\n    }\n    var rs = routes.map((rt, i) => {\n        const { children, name, path, component: Component, ...rest } = rt;\n        let newPath = `${basePath}${path}`;\n        newPath = newPath.replace(/\\/\\//g, "/");\n        return (\n            <Route key={i} {...rest}\n                path={newPath}\n                render={values => {\n                    return <Component {...values}>\n                        {getRoutes(rt.children, newPath)}\n                    </Component>\n                }}\n            />\n        )\n    });\n    return <Switch>\n        {rs}\n    </Switch>\n}\n\n/**\n * \u4f7f\u7528Route\u7ec4\u4ef6\uff0c\u6839\u636e\u4e0d\u540c\u7684\u8def\u5f84\uff0c\u6e32\u67d3\u9876\u7ea7\u9875\u9762\n */\nexport default function RootRouter() {\n    return (\n        <>\n            {/* \u8fd4\u56de\u4e00\u7ec4Route */}\n            {getRoutes(routeConfig, "/")}\n        </>\n    )\n}\n'})}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"betterLink.js"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'import React from \'react\'\nimport { Link } from "react-router-dom"\nimport routeConfig from "./routeConfig"\n\nexport default function BetterLink({ to, ...rest }) {\n    if (to.name && typeof to !== "string") {\n        to.pathname = getPathFromName(to.name, "/", routeConfig);\n        if (to.pathname === undefined) {\n            throw new Error(`name\u5c5e\u6027\u503c${to.name}\u65e0\u6548`)\n        }\n    }\n\n    return <Link {...rest} to={to} />\n}\n\n\n/**\n * \u6839\u636ename\u7684\u503c\uff0c\u67e5\u627e\u5bf9\u5e94\u7684path\uff0c\u6ca1\u6709\u8003\u8651\u6709params\u7684\u60c5\u51b5\n * \u5982\u679c\u6709\uff0c\u4f1a\u6bd4\u8f83\u590d\u6742\uff0c\u9700\u8981\u7528\u5230\u7b2c\u4e09\u65b9\u5e93path-to-regexp\n * @param {*} name \n */\nfunction getPathFromName(name, baseUrl, routesArr) {\n    for (const item of routesArr) {\n        let newPath = baseUrl + item.path;\n        newPath = newPath.replace(/\\/\\//g, "/");\n        if (item.name === name) {\n            return newPath;\n        }\n        else {\n            if (Array.isArray(item.children)) {\n                const path = getPathFromName(name, newPath, item.children)\n                if (path !== undefined) {\n                    return path;\n                }\n            }\n        }\n    }\n}\n'})})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>c});var r=t(6540);const o={},a=r.createContext(o);function s(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);