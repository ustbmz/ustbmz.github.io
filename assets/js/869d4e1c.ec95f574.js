"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2443],{3266:(n,e,o)=>{o.r(e),o.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>p});const r=JSON.parse('{"id":"Vue/AsyncComponents","title":"\u7ec4\u4ef6\u7684\u53d8\u5316","description":"\u5b9e\u73b0\u5f02\u6b65\u5939\u5728\u7ec4\u4ef6\u4e0e\u8def\u7531","source":"@site/docs/Vue/05.AsyncComponents.md","sourceDirName":"Vue","slug":"/Vue/AsyncComponents","permalink":"/docs/Vue/AsyncComponents","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Vue/05.AsyncComponents.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{},"sidebar":"Vue3SiderBar","next":{"title":"\u83b7\u53d6\u54cd\u5e94\u5f0f\u6570\u636e","permalink":"/docs/Vue/ReactivityApi"}}');var t=o(4848),s=o(8453);const i={},c="\u7ec4\u4ef6\u7684\u53d8\u5316",a={},p=[];function u(n){const e={blockquote:"blockquote",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"\u7ec4\u4ef6\u7684\u53d8\u5316",children:"\u7ec4\u4ef6\u7684\u53d8\u5316"})}),"\n",(0,t.jsx)(e.p,{children:"\u5b9e\u73b0\u5f02\u6b65\u5939\u5728\u7ec4\u4ef6\u4e0e\u8def\u7531"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"defineAsyncComponent"})}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"/* @vite-ignore */\nimport { defineAsyncComponent, h } from 'vue'\nimport Loading from '../components/Loading.vue'\nimport ErrorTip from '../components/ErrorTip.vue'\nimport 'nprogress/nprogress.css'\nimport nProgress from 'nprogress'\nnProgress.configure({\n  showSpinner: false,\n  trickleSpeed: 50,\n})\n\nexport function delay(durtion) {\n  if (!durtion) {\n    durtion = random(1000, 5000)\n  }\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve(0)\n    }, durtion)\n  })\n}\n\nexport function random(max, min) {\n  return Math.floor(Math.random(max - min) + min)\n}\n\nexport function getAsyncPage(path) {\n  return defineAsyncComponent({\n    loader: async () => {\n      nProgress.start()\n      await delay()\n      let comp = null\n      if (path === 'home') {\n        comp = import('../views/HomeView.vue')\n      } else {\n        comp = import('../views/AboutView.vue')\n      }\n      nProgress.done()\n      return comp\n    },\n    loadingComponent: Loading,\n  })\n}\n\nexport function getAsyncComponents(path) {\n  return defineAsyncComponent({\n    loader: async () => {\n      await delay()\n      if (Math.random() < 0.5) {\n        throw new Error()\n      }\n      if (path === '3') {\n        return import('@/components/Block3.vue')\n      } else {\n        return import('@/components/Block5.vue')\n      }\n    },\n    loadingComponent: Loading,\n    errorComponent: {\n      render() {\n        return h(ErrorTip, '\u51fa\u9519\u5566\uff01\uff01\uff01')\n      },\n    },\n  })\n}\n"})}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"nProgress"}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"\u8fdb\u5ea6\u6761\u8fc7\u5ea6\u52a8\u753b\u7b2c\u4e09\u65b9\u5e93"})]})}function d(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(u,{...n})}):u(n)}},8453:(n,e,o)=>{o.d(e,{R:()=>i,x:()=>c});var r=o(6540);const t={},s=r.createContext(t);function i(n){const e=r.useContext(s);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:i(n.components),r.createElement(s.Provider,{value:e},n.children)}}}]);