<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nginx 基本知识及用法 | 西蒙无敌</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="life is fxxing movie">
    
    <link rel="preload" href="./assets/css/0.styles.972adae9.css" as="style"><link rel="preload" href="./assets/js/app.f139b321.js" as="script"><link rel="preload" href="./assets/js/2.3429f92b.js" as="script"><link rel="preload" href="./assets/js/20.473d1127.js" as="script"><link rel="prefetch" href="./assets/js/10.f1d553d1.js"><link rel="prefetch" href="./assets/js/11.c4747e86.js"><link rel="prefetch" href="./assets/js/12.c1cb2abe.js"><link rel="prefetch" href="./assets/js/13.d32a15ff.js"><link rel="prefetch" href="./assets/js/14.8d23d477.js"><link rel="prefetch" href="./assets/js/15.9432b7e8.js"><link rel="prefetch" href="./assets/js/16.c8941f76.js"><link rel="prefetch" href="./assets/js/17.c67f01e4.js"><link rel="prefetch" href="./assets/js/18.76a5ecb0.js"><link rel="prefetch" href="./assets/js/19.db26ccc0.js"><link rel="prefetch" href="./assets/js/21.fc4e5dff.js"><link rel="prefetch" href="./assets/js/22.4f6f66c8.js"><link rel="prefetch" href="./assets/js/23.39a089e5.js"><link rel="prefetch" href="./assets/js/24.9f842e92.js"><link rel="prefetch" href="./assets/js/3.632fd093.js"><link rel="prefetch" href="./assets/js/4.0db1b887.js"><link rel="prefetch" href="./assets/js/5.f9c8fe08.js"><link rel="prefetch" href="./assets/js/6.0ab9ae4b.js"><link rel="prefetch" href="./assets/js/7.510cfdcb.js"><link rel="prefetch" href="./assets/js/8.84de6c85.js"><link rel="prefetch" href="./assets/js/9.a3e6b837.js">
    <link rel="stylesheet" href="./assets/css/0.styles.972adae9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/./" class="home-link router-link-active"><!----> <span class="site-name">西蒙无敌</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="底层语言" class="dropdown-title"><span class="title">底层语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="底层语言" class="mobile-dropdown-title"><span class="title">底层语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          学习汇编
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./css/basic/" class="nav-link">
  汇编语言
</a></li></ul></li><li class="dropdown-item"><h4>
          重温C++
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./css/basic/" class="nav-link">
  C++基础
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="IOS开发" class="dropdown-title"><span class="title">IOS开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="IOS开发" class="mobile-dropdown-title"><span class="title">IOS开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Swift语言
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./swift/init/" class="nav-link">
  基础知识
</a></li><li class="dropdown-subitem"><a href="/./swift/flow/" class="nav-link">
  流程控制
</a></li><li class="dropdown-subitem"><a href="/./swift/func/" class="nav-link">
  函数
</a></li></ul></li><li class="dropdown-item"><h4>
          Object-c
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./object-c/init/" class="nav-link">
  基础知识
</a></li><li class="dropdown-subitem"><a href="/./object-c/flow/" class="nav-link">
  流程控制
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JavaScript
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./javascript/basic/" class="nav-link">
  js基础知识
</a></li></ul></li><li class="dropdown-item"><h4>
          ES6语法
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./javascript/es6/" class="nav-link">
  ES6语法
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CSS进阶" class="dropdown-title"><span class="title">CSS进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="CSS进阶" class="mobile-dropdown-title"><span class="title">CSS进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Css
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./css/basic/" class="nav-link">
  Css框模型
</a></li><li class="dropdown-subitem"><a href="/./css/flex/" class="nav-link">
  Flex弹性布局
</a></li><li class="dropdown-subitem"><a href="/./css/grid/" class="nav-link">
  Grid网格布局
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法刷题" class="dropdown-title"><span class="title">算法刷题</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法刷题" class="mobile-dropdown-title"><span class="title">算法刷题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          努力刷题
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./leetcode/day/" class="nav-link">
  每日一题
</a></li><li class="dropdown-subitem"><a href="/./leetcode/week/" class="nav-link">
  每周大题
</a></li></ul></li><li class="dropdown-item"><h4>
          大题
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./leetcode/difficult/" class="nav-link">
  难题详解
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="服务器相关" class="dropdown-title"><span class="title">服务器相关</span> <span class="arrow down"></span></button> <button type="button" aria-label="服务器相关" class="mobile-dropdown-title"><span class="title">服务器相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          服务器相关
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./server/nginx/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Nginx
</a></li><li class="dropdown-subitem"><a href="/./server/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-subitem"><a href="/./server/mongo/" class="nav-link">
  Mongo
</a></li><li class="dropdown-subitem"><a href="/./server/jenkins/" class="nav-link">
  Jenkins
</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="底层语言" class="dropdown-title"><span class="title">底层语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="底层语言" class="mobile-dropdown-title"><span class="title">底层语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          学习汇编
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./css/basic/" class="nav-link">
  汇编语言
</a></li></ul></li><li class="dropdown-item"><h4>
          重温C++
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./css/basic/" class="nav-link">
  C++基础
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="IOS开发" class="dropdown-title"><span class="title">IOS开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="IOS开发" class="mobile-dropdown-title"><span class="title">IOS开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Swift语言
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./swift/init/" class="nav-link">
  基础知识
</a></li><li class="dropdown-subitem"><a href="/./swift/flow/" class="nav-link">
  流程控制
</a></li><li class="dropdown-subitem"><a href="/./swift/func/" class="nav-link">
  函数
</a></li></ul></li><li class="dropdown-item"><h4>
          Object-c
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./object-c/init/" class="nav-link">
  基础知识
</a></li><li class="dropdown-subitem"><a href="/./object-c/flow/" class="nav-link">
  流程控制
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          JavaScript
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./javascript/basic/" class="nav-link">
  js基础知识
</a></li></ul></li><li class="dropdown-item"><h4>
          ES6语法
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./javascript/es6/" class="nav-link">
  ES6语法
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CSS进阶" class="dropdown-title"><span class="title">CSS进阶</span> <span class="arrow down"></span></button> <button type="button" aria-label="CSS进阶" class="mobile-dropdown-title"><span class="title">CSS进阶</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Css
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./css/basic/" class="nav-link">
  Css框模型
</a></li><li class="dropdown-subitem"><a href="/./css/flex/" class="nav-link">
  Flex弹性布局
</a></li><li class="dropdown-subitem"><a href="/./css/grid/" class="nav-link">
  Grid网格布局
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法刷题" class="dropdown-title"><span class="title">算法刷题</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法刷题" class="mobile-dropdown-title"><span class="title">算法刷题</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          努力刷题
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./leetcode/day/" class="nav-link">
  每日一题
</a></li><li class="dropdown-subitem"><a href="/./leetcode/week/" class="nav-link">
  每周大题
</a></li></ul></li><li class="dropdown-item"><h4>
          大题
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./leetcode/difficult/" class="nav-link">
  难题详解
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="服务器相关" class="dropdown-title"><span class="title">服务器相关</span> <span class="arrow down"></span></button> <button type="button" aria-label="服务器相关" class="mobile-dropdown-title"><span class="title">服务器相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          服务器相关
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/./server/nginx/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Nginx
</a></li><li class="dropdown-subitem"><a href="/./server/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-subitem"><a href="/./server/mongo/" class="nav-link">
  Mongo
</a></li><li class="dropdown-subitem"><a href="/./server/jenkins/" class="nav-link">
  Jenkins
</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Server</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/./server/nginx/" aria-current="page" class="active sidebar-link">Nginx 基本知识及用法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./server/nginx/#nginx-优点" class="sidebar-link">Nginx 优点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./server/nginx/#io多路复用-epoll-模型" class="sidebar-link">IO多路复用 epoll 模型</a></li><li class="sidebar-sub-header"><a href="/./server/nginx/#cpu亲和" class="sidebar-link">CPU亲和</a></li></ul></li><li class="sidebar-sub-header"><a href="/./server/nginx/#nginx-快速安装" class="sidebar-link">Nginx 快速安装</a></li><li class="sidebar-sub-header"><a href="/./server/nginx/#安装目录" class="sidebar-link">安装目录</a></li><li class="sidebar-sub-header"><a href="/./server/nginx/#nginx-conf-配置详解" class="sidebar-link">Nginx.conf 配置详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/./server/nginx/#conf-d-default-conf-详解" class="sidebar-link">conf.d / default.conf 详解</a></li></ul></li><li class="sidebar-sub-header"><a href="/./server/nginx/#nginx虚拟主机及实现方式" class="sidebar-link">Nginx虚拟主机及实现方式</a></li></ul></li><li><a href="/./server/redis/" class="sidebar-link">Centos7安装Redis</a></li><li><a href="/./server/mongo/" class="sidebar-link">安装mongodb</a></li><li><a href="/./server/jenkins/" class="sidebar-link">Jenkins 安装及自动化部署</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="nginx-基本知识及用法"><a href="#nginx-基本知识及用法" class="header-anchor">#</a> Nginx 基本知识及用法</h1> <blockquote><p>基本环境安装</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code>$ yum -y <span class="token function">install</span> gcc gcc-c++ autoconf pcre pcre-devel <span class="token function">make</span> automake 

$ yum -y <span class="token function">install</span> <span class="token function">wget</span> httpd-tools <span class="token function">vim</span>
</code></pre></div><p>只针对测试服务器</p> <p>关闭iptables 规则</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ iptables -L
<span class="token comment">## 关闭</span>
$ iptables -F

$ iptables -t nat -L
<span class="token comment">## 关闭</span>
$ iptables -t nat -F
</code></pre></div><p>关闭selinux</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">## 查看</span>
$ getenforce
<span class="token comment">## 关闭</span>
$ setenforce <span class="token number">0</span>
</code></pre></div><h2 id="nginx-优点"><a href="#nginx-优点" class="header-anchor">#</a> Nginx 优点</h2> <h3 id="io多路复用-epoll-模型"><a href="#io多路复用-epoll-模型" class="header-anchor">#</a> IO多路复用 epoll 模型</h3> <p><img src="https://gitee.com/cnmz/images/raw/master/mdpic/image-20211006105453966.png" alt="image-20211006105453966"></p> <p><img src="https://gitee.com/cnmz/images/raw/master/mdpic/image-20211006113459166.png" alt="image-20211006113459166"></p> <h3 id="cpu亲和"><a href="#cpu亲和" class="header-anchor">#</a> CPU亲和</h3> <blockquote><p>官方文档  <a href="http://nginx.org/en/docs/ngx_core_module.html#worker_cpu_affinity" target="_blank" rel="noopener noreferrer">Core functionality (nginx.org)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p><img src="https://gitee.com/cnmz/images/raw/master/mdpic/image-20211006113833608.png" alt="image-20211006113833608"></p> <h2 id="nginx-快速安装"><a href="#nginx-快速安装" class="header-anchor">#</a> Nginx 快速安装</h2> <blockquote><p>官方安装文档 <a href="http://nginx.org/en/linux_packages.html#RHEL-CentOS" target="_blank" rel="noopener noreferrer">nginx: Linux packages<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code>$ yum <span class="token function">install</span> yum-utils
</code></pre></div><p>To set up the yum repository, create the file named <code>/etc/yum.repos.d/nginx.repo</code> with the following contents:</p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>[nginx-stable]
name=nginx stable repo
baseurl=http://nginx.org/packages/centos/$releasever/$basearch/
gpgcheck=1
enabled=1
gpgkey=https://nginx.org/keys/nginx_signing.key
module_hotfixes=true

[nginx-mainline]
name=nginx mainline repo
baseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/
gpgcheck=1
enabled=0
gpgkey=https://nginx.org/keys/nginx_signing.key
module_hotfixes=true
</code></pre></div></blockquote> <p>By default, the repository for stable nginx packages is used. If you would like to use mainline nginx packages, run the following command:</p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>sudo yum-config-manager --enable nginx-mainline
</code></pre></div></blockquote> <p>To install nginx, run the following command:</p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>sudo yum install nginx
</code></pre></div></blockquote> <p>When prompted to accept the GPG key, verify that the fingerprint matches <code>573B FD6B 3D8F BC64 1079 A6AB ABF5 BD82 7BD9 BF62</code>, and if so, accept it.</p> <p>配置 /etc/yum.repo.d/nginx.repo</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>nginx-stable<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>nginx stable repo
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://nginx.org/packages/centos/<span class="token variable">$releasever</span>/<span class="token variable">$basearch</span>/
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://nginx.org/keys/nginx_signing.key
<span class="token assign-left variable">module_hotfixes</span><span class="token operator">=</span>true

<span class="token punctuation">[</span>nginx-mainline<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>nginx mainline repo
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://nginx.org/packages/mainline/centos/<span class="token variable">$releasever</span>/<span class="token variable">$basearch</span>/
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://nginx.org/keys/nginx_signing.key
<span class="token assign-left variable">module_hotfixes</span><span class="token operator">=</span>true 
</code></pre></div><p>查看 nginx 版本</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ yum list <span class="token operator">|</span> <span class="token function">grep</span> nginx
</code></pre></div><p>安装稳定版</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ yum <span class="token function">install</span> -y nginx
</code></pre></div><p>查看 nginx 安装目录及配置文件</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">rpm</span> -ql nginx
</code></pre></div><p><img src="https://gitee.com/cnmz/images/raw/master/mdpic/image-20211006153451428.png" alt="image-20211006153451428"></p> <h2 id="安装目录"><a href="#安装目录" class="header-anchor">#</a> 安装目录</h2> <table><thead><tr><th>路径</th> <th>类型</th> <th>作用</th></tr></thead> <tbody><tr><td>/etc/logrotate.d/nginx</td> <td>配置文件</td> <td>nginx日志轮转，用于logrotate服务的日志切割</td></tr> <tr><td>/etc/nginx</td> <td>目录、配置文件</td> <td>Nginx主配置文件</td></tr> <tr><td>/etc/nginx/nginx.conf</td> <td>目录、配置文件</td> <td></td></tr> <tr><td>/etc/nginx/conf.a</td> <td>目录、配置文件</td> <td></td></tr> <tr><td>/etc/nginx/conf.d/default.conf</td> <td>目录、配置文件</td> <td></td></tr> <tr><td>/etc/nginx/fastcgi_params</td> <td>配置文件</td> <td>cgi配置相关，fastcgi配置</td></tr> <tr><td>/etc/nginx/uwsgi_params</td> <td></td> <td></td></tr> <tr><td>/etc/nginx/scgi_params</td> <td></td> <td></td></tr> <tr><td>/etc/nginx/koi-utf</td> <td>配置文件</td> <td>编码转换映射转化文件</td></tr> <tr><td>/etc/nginx/koi-win</td> <td></td> <td></td></tr> <tr><td>/etc/nginx/win-utf</td> <td></td> <td></td></tr> <tr><td>/usr/lib/systemd/system.nginx-debug.service</td> <td>配置文件</td> <td>用于配置系统守护进程管理器管理方式</td></tr> <tr><td>/usr/lib/systemd/nginx-.service</td> <td></td> <td></td></tr> <tr><td>/etc/sysconfig/nginx</td> <td></td> <td></td></tr> <tr><td>/etc/sysconfig/nginx-debug</td> <td></td> <td></td></tr> <tr><td>/usr/lib64/nginx/modules</td> <td>目录</td> <td>Nginx模块目录</td></tr> <tr><td>/etc/nginx/modules</td> <td></td> <td></td></tr> <tr><td>/usr/sbin/nginx</td> <td>命令</td> <td>nginx服务的启动管理终端命令</td></tr> <tr><td>/usr/sbin/nginx-debug</td> <td></td> <td></td></tr> <tr><td>/var/cache/nginx</td> <td>目录</td> <td>Nginx的缓存目录</td></tr> <tr><td>/var/log/nginx</td> <td>目录</td> <td>Nginx的日志目录</td></tr></tbody></table> <p><img src="https://gitee.com/cnmz/images/raw/master/mdpic/image-20211007103749709.png" alt="image-20211007103749709"></p> <p><img src="https://gitee.com/cnmz/images/raw/master/mdpic/image-20211007103812716.png" alt="image-20211007103812716"></p> <p><img src="https://gitee.com/cnmz/images/raw/master/mdpic/image-20211007103832573.png" alt="image-20211007103832573"></p> <h2 id="nginx-conf-配置详解"><a href="#nginx-conf-配置详解" class="header-anchor">#</a> Nginx.conf 配置详解</h2> <div class="language-shell extra-class"><pre class="language-shell"><code>
<span class="token comment">## 设置nginx 服务使用的系统用户</span>
user  nginx<span class="token punctuation">;</span>
<span class="token comment">## 工作进程数 IO复用，启用多个work实现并发处理。一般与cpu个数保持一致</span>
worker_processes  auto<span class="token punctuation">;</span>
<span class="token comment">## nginx错误日志</span>
error_log  /var/log/nginx/error.log notice<span class="token punctuation">;</span>
<span class="token comment">## nginx服务启动时pid  把每次启动的PID记录下来，方便以后查找</span>
pid        /var/run/nginx.pid<span class="token punctuation">;</span>

<span class="token comment">## 事件模块</span>
events <span class="token punctuation">{</span>
	<span class="token comment">## 每个进程容许的最大连接数  最大连接数6535</span>
    worker_connections  <span class="token number">1024</span><span class="token punctuation">;</span>
    <span class="token comment">## use 定义使用的内核模型</span>
<span class="token punctuation">}</span>


http <span class="token punctuation">{</span>
    include       /etc/nginx/mime.types<span class="token punctuation">;</span>
    default_type  application/octet-stream<span class="token punctuation">;</span>

    log_format  main  <span class="token string">'$remote_addr - $remote_user [$time_local] &quot;$request&quot; '</span>
                      <span class="token string">'$status $body_bytes_sent &quot;$http_referer&quot; '</span>
                      <span class="token string">'&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;'</span><span class="token punctuation">;</span>

    access_log  /var/log/nginx/access.log  main<span class="token punctuation">;</span>

    sendfile        on<span class="token punctuation">;</span>
    <span class="token comment">#tcp_nopush     on;</span>

	<span class="token comment">## 超时时间</span>
    keepalive_timeout  <span class="token number">65</span><span class="token punctuation">;</span>

    <span class="token comment">#gzip  on;</span>
    <span class="token comment">## 默认加载conf.d下所有的conf配置文件</span>
    include /etc/nginx/conf.d/*.conf<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="conf-d-default-conf-详解"><a href="#conf-d-default-conf-详解" class="header-anchor">#</a> conf.d / default.conf 详解</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>server <span class="token punctuation">{</span>
    <span class="token comment">## 监听端口</span>
    listen       <span class="token number">80</span><span class="token punctuation">;</span>
    <span class="token comment">## 域名地址</span>
    server_name  localhost<span class="token punctuation">;</span>

    <span class="token comment">#access_log  /var/log/nginx/host.access.log  main;</span>

    location / <span class="token punctuation">{</span>
    	<span class="token comment">## 首页路径</span>
        root   /usr/share/nginx/html<span class="token punctuation">;</span>
        <span class="token comment">## 首页页面</span>
        index  index.html index.htm<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">#error_page  404              /404.html;</span>

    <span class="token comment"># redirect server error pages to the static page /50x.html</span>
    <span class="token comment">#</span>
    error_page   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  /50x.html<span class="token punctuation">;</span>
    location <span class="token operator">=</span> /50x.html <span class="token punctuation">{</span>
        root   /usr/share/nginx/html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment"># proxy the PHP scripts to Apache listening on 127.0.0.1:80</span>
    <span class="token comment">#</span>
    <span class="token comment">#location ~ \.php$ {</span>
    <span class="token comment">#    proxy_pass   http://127.0.0.1;</span>
    <span class="token comment">#}</span>

    <span class="token comment"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span>
    <span class="token comment">#</span>
    <span class="token comment">#location ~ \.php$ {</span>
    <span class="token comment">#    root           html;</span>
    <span class="token comment">#    fastcgi_pass   127.0.0.1:9000;</span>
    <span class="token comment">#    fastcgi_index  index.php;</span>
    <span class="token comment">#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span>
    <span class="token comment">#    include        fastcgi_params;</span>
    <span class="token comment">#}</span>

    <span class="token comment"># deny access to .htaccess files, if Apache's document root</span>
    <span class="token comment"># concurs with nginx's one</span>
    <span class="token comment">#</span>
    <span class="token comment">#location ~ /\.ht {</span>
    <span class="token comment">#    deny  all;</span>
    <span class="token comment">#}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="nginx虚拟主机及实现方式"><a href="#nginx虚拟主机及实现方式" class="header-anchor">#</a> Nginx虚拟主机及实现方式</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">## 检查虚拟主机 Nginx配置文件是否正确</span>
$ nginx -tc /etc/nginx/nginx.conf 

<span class="token comment">## 停止nginx服务</span>
$ systemctl stop nginx 
<span class="token comment">## OR</span>
$ nginx -s stop -c /etc/nginx/nginx.conf 

<span class="token comment">## 启动nginx服务</span>
$ systemctl start nginx 
<span class="token comment"># OR</span>
$ nginx -c /etc/nginx/nginx.conf 

<span class="token comment">## 查看本机监听端口</span>
$ ss -luntp

</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/./server/redis/">
        Centos7安装Redis
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="./assets/js/app.f139b321.js" defer></script><script src="./assets/js/2.3429f92b.js" defer></script><script src="./assets/js/20.473d1127.js" defer></script>
  </body>
</html>
